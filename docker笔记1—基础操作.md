#### 1 获取镜像

使用`docker pull`命令拉取镜像。



#### 2 运行容器

有了镜像后，就能以此镜像为基础，使用`docker run`命令启动容器，如：

```bash
docker run -it --rm ubuntu:18.04 bash

cat /etc/os-release

exit
```

其中的参数含义如下：

- `-i`：表示交互式操作；
- `-t`：表示使用终端；
- `--rm`：表示退出容器之后将其删除；
- `ubuntu:18.04`：镜像名；
- `bash`：启动容器所运行的命令。

进入容器后运行了`cat /etc/os-release`命令，查看系统版本。



#### 3 列出镜像



#### 4 删除镜像



#### 5 提交镜像

注意，不要使用`docker commit`来定制镜像，使用`Dockerfile`定制。



#### 6 定制镜像

镜像的定制实际就是定制每一层所添加的配置、文件，可以把每一层修改、安装、构建、操作的命令都写入一个脚本，使用这个脚本来构建、定制镜像，则无法重复、镜像构成透明性等问题都能解决，这个脚本就是Dockerfile。它是一个文本文件，每一条指令构建一层，因此一条指令的内容就应该描述该层如何构建。

##### 6.1 `FROM`指定基础镜像

定制镜像，就一定是以某个镜像为基础，`FROM`指令指定基础镜像，这是必须的，因此一个Dockerfile必须有这个指令，且是第一条指令。

除了选择现有镜像为基础，Docker中还存在一个名为`scratch`的特殊镜像，表示一个空白镜像，一次镜像为基础表示不以任何镜像为基础，接下来缩写的指令将作为镜像的第一层展开。

##### 6.2 `RUN`执行命令

`RUN`指令用来执行命令行命令，是在定制镜像时最常用的指令之一，格式有两种：

- shell格式
- exec格式

要注意的是，Dockerfile中每一条指令都会建立一层，每个`RUN`行为都会新建立一层，在其上执行这些命令，之后`commit`这一层的修改，构成新的镜像。

##### 6.3 构建镜像

使用`docker build`命令构建镜像，其格式为：

```bash
docker build [options] <context/url/->
```

##### 6.4 构建上下文

`docker build`命令的最后参数指定构建的上下文路径。